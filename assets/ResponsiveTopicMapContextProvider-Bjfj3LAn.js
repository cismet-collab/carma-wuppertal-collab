import{R as n,r as f}from"./index-CoXXcpNP.js";import{u as C,s as E,l as R}from"./Section-gCbbnLqx.js";function p(){const[a,u]=f.useState([0,0]);return f.useLayoutEffect(()=>{function i(){u([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)},[]),a}const P=n.createContext(),m=n.createContext(),g={windowSize:void 0,infoBoxPixelWidth:300,searchBoxPixelWidth:300,infoBoxControlPosition:"bottomright",searchBoxControlPosition:"bottomleft",responsiveState:"normal",gap:25},I=({children:a,enabled:u=!0,appKey:i,persistenceSettings:l,infoBoxPixelWidth:S=300,searchBoxPixelWidth:B=300})=>{const[x,v]=C({...g,infoBoxPixelWidth:S,searchBoxPixelWidth:B}),[W,z]=p(),h={width:W,height:z},r="responsive",t=(e,s)=>o=>{v(c=>{if(s===!0||JSON.stringify(c[e])!==JSON.stringify(o)){var w;(w=l[r])!==null&&w!==void 0&&w.includes(e)&&R.setItem("@"+i+"."+r+"."+e,o),c[e]=o}})};f.useEffect(()=>{if(l&&l[r])for(const e of l[r]){const s="@"+i+"."+r+"."+e,o=t(e,!0);E(s,o)}},[]);const d={setWindowSize:t("windowSize"),setInfoBoxPixelWidth:t("infoBoxPixelWidth"),setSearchBoxPixelWidth:t("searchBoxPixelWidth"),setInfoBoxControlPosition:t("infoBoxControlPosition"),setSearchBoxControlPosition:t("searchBoxControlPosition"),setResponsiveState:t("responsiveState")};return f.useEffect(()=>{d.setWindowSize(h);let e=x.infoBoxPixelWidth,s=h.width,o=25,c=x.searchBoxPixelWidth;s-o-c-e<=0?d.setResponsiveState("small"):d.setResponsiveState("normal")},[h]),u===!0?n.createElement(P.Provider,{value:x},n.createElement(m.Provider,{value:{dispatch:v,...d}},a)):n.createElement(P.Provider,{value:void 0},n.createElement(m.Provider,{value:{undefined:void 0}},a))};export{I as R,P as S};
